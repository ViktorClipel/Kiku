# Kiku: Interface Web Segura para Agente de IA Conversacional

## üìñ Sobre o Projeto

Este projeto foi desenvolvido como parte da avalia√ß√£o da disciplina de Desenvolvimento WEB 2 no Instituto Federal Rio Grandense, campus Farroupilha. "Kiku" √© uma aplica√ß√£o web segura, constru√≠da com o framework Flask, que serve como interface para um motor de IA conversacional subjacente.

O foco do trabalho foi a implementa√ß√£o dos requisitos de seguran√ßa web, a aplica√ß√£o da arquitetura MVC, e a integra√ß√£o com um backend de IA n√£o-convencional que possui funcionalidades avan√ßadas de mem√≥ria e orquestra√ß√£o, com todos os dados sendo gerenciados de forma isolada para cada usu√°rio.

---

## ‚ú® Funcionalidades Implementadas

### Funcionalidades da Aplica√ß√£o Web (Kiku)

* **Autentica√ß√£o Segura de Usu√°rios:**
    * Sistema completo de Registro, Login e Logout utilizando **Flask-Login**.
    * Senhas armazenadas de forma segura no banco de dados com **hash** (`werkzeug.security`).
    * Prote√ß√£o de rotas, garantindo que apenas usu√°rios autenticados possam aceder ao chat.

* **Seguran√ßa Web Completa:**
    * **Prote√ß√£o contra CSRF:** Formul√°rios de login e registro protegidos com tokens CSRF atrav√©s de `Flask-WTF`.
    * **Prote√ß√£o contra SQL Injection:** O uso exclusivo do ORM **SQLAlchemy** previne ataques de inje√ß√£o de SQL.
    * **Prote√ß√£o contra XSS:** O motor de templates Jinja2 e os formul√°rios WTForms escapam automaticamente as entradas do usu√°rio, prevenindo ataques de Cross-Site Scripting.

* **Interface de Chat em Tempo Real:**
    * Comunica√ß√£o bidirecional e persistente atrav√©s de **WebSockets (Flask-SocketIO)**.
    * Respostas da IA enviadas em *stream*, criando um efeito de "digita√ß√£o" em tempo real para o usu√°rio.
    * O hist√≥rico da conversa √© salvo e recarregado automaticamente a cada nova sess√£o.

### Funcionalidades do Motor de IA

* **Orquestra√ß√£o Inteligente de Respostas:**
    * A cada prompt, o backend utiliza um modelo de IA para gerar um **"Plano de A√ß√£o" em JSON**.
    * Este plano determina a inten√ß√£o do usu√°rio, a necessidade de aceder √† mem√≥ria de longo prazo e **extrai factos em tempo real** da conversa (ex: nome do usu√°rio).
    * O sistema implementa um **"Gerenciador de Fallback Inteligente"** que "trava" modelos de IA que falham, garantindo resili√™ncia.

* **Mem√≥ria Cognitiva Multi-N√≠vel e por Usu√°rio:**
    * Cada usu√°rio possui uma "mem√≥ria" de IA completamente isolada e persistente.
    * **N√≠vel 4 (Armazenamento de Factos):** Factos expl√≠citos sobre o utilizador s√£o guardados num ficheiro `buddy_config.json` para personalizar a conversa.
    * **N√≠vel 3 (Arquivo de Longo Prazo - RAG):** T√≥picos de conversa s√£o processados (resumidos e etiquetados) e arquivados num banco de dados vetorial  para recupera√ß√£o sem√¢ntica futura.
    * **N√≠vel 2 (Contexto de Sess√£o - "Bancada de Trabalho"):** Um `Contextualizador Sem√¢ntico` agrupa conversas em t√≥picos coesos. Um `"Curador"` consulta esta mem√≥ria de sess√£o para injetar contexto relevante nas respostas.
    * **N√≠vel 1 (Contexto Imediato):** O hist√≥rico recente da conversa √© sempre utilizado para garantir a fluidez do di√°logo.

---

## üõ†Ô∏è Tecnologias Utilizadas

#### **Backend**
* Python 3
* Flask, Flask-SocketIO, Flask-Login, Flask-WTF
* SQLAlchemy
* `sentence-transformers`
* `faiss-cpu`
* `google-generativeai` / `openai`
* `python-dotenv`

#### **Frontend**
* HTML, CSS, JavaScript
* Socket.IO Client

#### **Banco de Dados**
* SQLite

---

## üöÄ Configura√ß√£o e Instala√ß√£o

Siga os passos abaixo para configurar e executar o projeto localmente.

**Passos:**

1.  **V√° at√© o diret√≥rio correspondente em seu PC:**
    ```bash
    cd ...\buddy_app
    ```

2.  **Crie e configure o arquivo `.env`:**
    Na raiz do projeto, crie um arquivo chamado `.env` e adicione suas chaves de API:
    ```
    GEMINI_API_KEY=SUA_CHAVE_DO_GEMINI_AQUI
    OPENAI_API_KEY=SUA_CHAVE_DA_OPENAI_AQUI
    ```

3.  **Crie e ative o ambiente virtual:**
    ```bash
    # Criar
    python -m venv .venv

    # Ativar (Windows)
    .\.venv\Scripts\activate

    # Ativar (macOS/Linux)
    source .venv/bin/activate
    ```

4.  **Instale as depend√™ncias:**
    ```bash
    pip install -r requirements.txt
    ```

5.  **Inicialize o banco de dados:**
    ```bash
    python -m flask init-db
    ```

6.  **Execute a aplica√ß√£o:**
    ```bash
    python -m flask run
    ```

7.  Acesse a aplica√ß√£o no seu navegador em: **`http://127.0.0.1:5000`**

---

## üïπÔ∏è Como Usar

1.  Acesse a p√°gina inicial e ser√° redirecionado para a tela de login.
2.  Crie um novo usu√°rio atrav√©s da p√°gina de registro.
3.  Fa√ßa login com as suas credenciais.
4.  Voc√™ ser√° direcionado para a interface de chat "Kiku" para conversar com o assistente.
5.  O hist√≥rico da sua conversa ser√° salvo. Ao fazer logout e login novamente, as mensagens anteriores ser√£o recarregadas.

---

## üë®‚Äçüíª Autores

**Viktor Clipel, Carlos Leandro Goulart dos Santos Junior, Ant√¥nio Comin**